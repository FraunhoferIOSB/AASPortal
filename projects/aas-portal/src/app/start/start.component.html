<!-----------------------------------------------------------------------------
 !
 ! Copyright (c) 2019-2024 Fraunhofer IOSB-INA Lemgo,
 ! eine rechtlich nicht selbstaendige Einrichtung der Fraunhofer-Gesellschaft
 ! zur Foerderung der angewandten Forschung e.V.
 !
 !---------------------------------------------------------------------------->

<div id="start-container" class="container-fluid">
    <fhg-aas-table [documents]="documents" [viewMode]="viewMode" [(selected)]="selected"
        [filter]="filterFavorites" ></fhg-aas-table>
</div>

<ng-template #startToolbar>
    <div class="input-group me-2">
        <button class="btn btn-outline-primary" type="button" (click)="addToFavorites().subscribe()">
            <i class="bi bi-star"></i>
        </button>
        <select [ngClass]="currentFavorites ? 'form-select fst-normal fw-normal' : 'form-select fst-italic fw-light'"
            [(ngModel)]="currentFavorites">
            @for (option of (favoritesLists | async); track option; let i = $index) {
            @if (i === 0) {
            <option class="fst-italic fw-light" [value]="''" translate>FAVORITES</option>
            } @else {
            <option class="fst-normal fw-normal" [value]="option">{{option}}</option>
            }
            }
        </select>
    </div>
    @if (!currentFavorites) {
    <div class="btn-group me-2">
        <button type="button" class="btn btn-primary" (click)="firstPage()" [disabled]="isFirstPage | async">
            <i class="bi bi-chevron-bar-left"></i>
        </button>
        <button type="button" class="btn btn-primary" (click)="previousPage()" [disabled]="isFirstPage | async">
            <i class="bi bi-chevron-left"></i>
        </button>
        <button type="button" class="btn btn-primary" (click)="nextPage()" [disabled]="isLastPage | async">
            <i class="bi bi-chevron-right"></i>
        </button>
        <button type="button" class="btn btn-primary" (click)="lastPage()" [disabled]="isLastPage | async">
            <i class="bi bi-chevron-bar-right"></i>
        </button>
    </div>
    <div class="btn-group me-2">
        <button type="button" class="btn btn-primary position-relative" (click)="refreshPage()">
            <i class="bi bi-arrow-clockwise"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-info">
                {{count | async}}
            </span>
        </button>
    </div>
    }
    <div class="btn-group me-2">
        <div ngbDropdown class="btn-group" role="group">
            <button type="button" class="btn btn-primary" ngbDropdownToggle id="menuEndpoints">
                <i class="bi bi-gear"></i>
            </button>
            <div ngbDropdownMenu class="dropdown-menu" id="menuEndpoints">
                <button ngbDropdownItem (click)="addEndpoint().subscribe()" translate>CMD_ADD_ENDPOINT</button>
                <button ngbDropdownItem (click)="removeEndpoint().subscribe()" translate>CMD_REMOVE_ENDPOINT</button>
                <button ngbDropdownItem (click)="reset().subscribe()" translate>CMD_RESET_CONFIGURATION</button>
            </div>
        </div>
    </div>
    <div class="btn-group me-2">
        <button type="button" class="btn btn-primary" (click)="uploadDocument().subscribe()">
            <i class="bi bi-upload"></i>
        </button>
        <button type="button" class="btn btn-primary" (click)="downloadDocument().subscribe()"
            [disabled]="!canDownloadDocument">
            <i class="bi bi-download"></i>
        </button>
        <button type="button" class="btn btn-primary" (click)="deleteDocument().subscribe()"
            [disabled]="!canDeleteDocument">
            <i class="bi bi-trash"></i>
        </button>
    </div>
    <div class="btn-group me-2" id="viewModeGroup">
        <input type="radio" [value]="'list'" class="btn-check" id="viewModeList" name="viewModeGroup" autocomplete="off"
            (change)="setViewMode('list')" [checked]="(viewMode | async) === 'list'">
        <label class="btn btn-primary" for="viewModeList">
            <i class="bi bi-list"></i>
        </label>
        <input type="radio" [value]="'tree'" class="btn-check" id="viewModeTree" name="viewModeGroup" autocomplete="off"
            (change)="setViewMode('tree')" [checked]="(viewMode | async) === 'tree'">
        <label class="btn btn-primary" for="viewModeTree">
            <i class="bi bi-diagram-3"></i>
        </label>
    </div>
    <div class="btn-group me-2">
        <div ngbDropdown class="btn-group" role="group">
            <button type="button" class="btn btn-primary" ngbDropdownToggle id="selectEndpoints"
                translate>LABEL_VIEWS</button>
            <div ngbDropdownMenu class="dropdown-menu" id="selectEndpoints">
                <button ngbDropdownItem (click)="viewUserFeedback()" [disabled]="!canViewUserFeedback"
                    translate>CMD_VIEW_USER_FEEDBACK</button>
                <button ngbDropdownItem (click)="viewNameplate()" [disabled]="!canViewNameplate"
                    translate>CMD_VIEW_NAMEPLATE</button>
            </div>
        </div>
    </div>
    <div class="input-group flex-grow-1 me-2">
        <div class="input-group-text">
            <i class="bi bi-filter"></i>
        </div>
        <input #textInput type="text" class="form-control" [value]="filter | async"
            [placeholder]="'PLACEHOLDER_FILTER' | translate" (change)="setFilter(textInput.value)"
            (keydown.enter)="textInput.blur()">
    </div>
</ng-template>